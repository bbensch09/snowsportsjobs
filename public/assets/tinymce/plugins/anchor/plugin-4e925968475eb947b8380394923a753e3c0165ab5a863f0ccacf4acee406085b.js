tinymce.PluginManager.add("anchor",function(e){var n=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},t=function(e){return function(t){for(var a=0;a<t.length;a++)n(t[a])&&t[a].attr("contenteditable",e)}},a=function(){var n=e.selection.getNode(),t="",a="A"==n.tagName&&""===e.dom.getAttrib(n,"href");a&&(t=n.name||n.id||""),e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:t},onsubmit:function(t){var o=t.data.name;a?n.id=o:(e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:o})))}})};tinymce.Env.ceFalse&&e.on("PreInit",function(){e.parser.addNodeFilter("a",t("false")),e.serializer.addNodeFilter("a",t(null))}),e.addCommand("mceAnchor",a),e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:a,stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:a})});